"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Live2DCubismFramework=exports.LogLevel=exports.Option=exports.CubismFramework=exports.Constant=void 0,exports.strtod=strtod,exports.csmDelete=csmDelete;var cubismidmanager_1=require("./id/cubismidmanager"),cubismrenderer_1=require("./rendering/cubismrenderer"),cubismdebug_1=require("./utils/cubismdebug"),cubismjson_1=require("./utils/cubismjson");function strtod(e,i){for(var s=0,r=1;;r++){var o=e.slice(r-1,r);if("e"!=o&&"-"!=o&&"E"!=o){var t=e.substring(0,r),n=Number(t);if(isNaN(n))break;s=r}}var u=parseFloat(e);return isNaN(u)&&(u=NaN),i[0]=e.slice(s),u}var s_isStarted=!1,s_isInitialized=!1,s_option=null,s_cubismIdManager=null;function csmDelete(e){e&&(e=void 0)}exports.Constant=Object.freeze({vertexOffset:0,vertexStep:2});var CubismFramework=function(){function e(){}return e.startUp=function(e){if(void 0===e&&(e=null),s_isStarted)return(0,cubismdebug_1.CubismLogInfo)("CubismFramework.startUp() is already done."),s_isStarted;if(null!=(s_option=e)&&Live2DCubismCore.Logging.csmSetLogFunction(s_option.logFunction),s_isStarted=!0){var i=Live2DCubismCore.Version.csmGetVersion(),s=(4278190080&i)>>24,r=(16711680&i)>>16,o=65535&i,t=i;(0,cubismdebug_1.CubismLogInfo)("Live2D Cubism Core version: {0}.{1}.{2} ({3})",("00"+s).slice(-2),("00"+r).slice(-2),("0000"+o).slice(-4),t)}return(0,cubismdebug_1.CubismLogInfo)("CubismFramework.startUp() is complete."),s_isStarted},e.cleanUp=function(){s_isStarted=!1,s_isInitialized=!1,s_option=null,s_cubismIdManager=null},e.initialize=function(e){void 0===e&&(e=0),(0,cubismdebug_1.CSM_ASSERT)(s_isStarted),s_isStarted?s_isInitialized?(0,cubismdebug_1.CubismLogWarning)("CubismFramework.initialize() skipped, already initialized."):(cubismjson_1.Value.staticInitializeNotForClientCall(),s_cubismIdManager=new cubismidmanager_1.CubismIdManager,Live2DCubismCore.Memory.initializeAmountOfMemory(e),s_isInitialized=!0,(0,cubismdebug_1.CubismLogInfo)("CubismFramework.initialize() is complete.")):(0,cubismdebug_1.CubismLogWarning)("CubismFramework is not started.")},e.dispose=function(){(0,cubismdebug_1.CSM_ASSERT)(s_isStarted),s_isStarted?s_isInitialized?(cubismjson_1.Value.staticReleaseNotForClientCall(),s_cubismIdManager.release(),s_cubismIdManager=null,cubismrenderer_1.CubismRenderer.staticRelease(),s_isInitialized=!1,(0,cubismdebug_1.CubismLogInfo)("CubismFramework.dispose() is complete.")):(0,cubismdebug_1.CubismLogWarning)("CubismFramework.dispose() skipped, not initialized."):(0,cubismdebug_1.CubismLogWarning)("CubismFramework is not started.")},e.isStarted=function(){return s_isStarted},e.isInitialized=function(){return s_isInitialized},e.coreLogFunction=function(e){Live2DCubismCore.Logging.csmGetLogFunction()&&Live2DCubismCore.Logging.csmGetLogFunction()(e)},e.getLoggingLevel=function(){return null!=s_option?s_option.loggingLevel:LogLevel.LogLevel_Off},e.getIdManager=function(){return s_cubismIdManager},e}();exports.CubismFramework=CubismFramework;var LogLevel,Option=function(){};exports.Option=Option,function(e){e[e.LogLevel_Verbose=0]="LogLevel_Verbose",e[e.LogLevel_Debug=1]="LogLevel_Debug",e[e.LogLevel_Info=2]="LogLevel_Info",e[e.LogLevel_Warning=3]="LogLevel_Warning",e[e.LogLevel_Error=4]="LogLevel_Error",e[e.LogLevel_Off=5]="LogLevel_Off"}(LogLevel||(exports.LogLevel=LogLevel={}));var Live2DCubismFramework,$=require("./live2dcubismframework");!function(e){e.Constant=$.Constant,e.csmDelete=$.csmDelete,e.CubismFramework=$.CubismFramework}(Live2DCubismFramework||(exports.Live2DCubismFramework=Live2DCubismFramework={}));